@using Tfvckits.Domain.Platform
@using System.Linq;
@using Autofac.Features.ResolveAnything
@model IEnumerable<Tfvckits.Domain.Platform.Models.ReportTeam>
@{
    Layout = null;
}

@foreach( var team in Model.Where( o =>o.Identities.Count>0&&(o.ShelvesetCount > 0 || o.ChangesetCount > 0)&& o.Team.Followed ).OrderBy( o => o.Team.Name ) )
{
    <label class="form-selectgroup-item flex-fill teamRow">
        <input type="radio" name="LimitTeamIds" value="@team.Team.Id" class="form-selectgroup-input">
        <div class="form-selectgroup-label d-flex align-items-center p-3">
            <div class="me-3">
                <span class="form-selectgroup-check"></span>
            </div>
            <div class="col">
                <div class="font-weight-medium teamName">
                    @team.Team.Name
                </div>
                <div class="text-muted teamSummary col row">
                    <div class="col-4 memberCount">
                        <i>
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                                <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
                            </svg>
                        </i> <span class="noticeNumber">@team.Identities.Count</span>
                    </div>
                    <div class="col-4"><span class="fabric-icon medium BranchShelveset"><span class="noticeNumber">@team.ChangesetCount</span></span></div>
                    <div class="col-4"><span class="fabric-icon medium DocumentSet"><span class="noticeNumber">@team.ShelvesetCount</span></span></div>
                </div>
            </div>
        </div>
    </label>
}

<script>
    $(document).ready(function () {
        if ($("#LimitTeamIds").val() != "") {
            $("input:radio[value='" + $("#LimitTeamIds").val() + "']").attr('checked', 'true');


            requestIdentities();
            requestTable();
        }

        $('input[type=radio][name=LimitTeamIds]').change(function () {
            $("#LimitTeamIds").val($(this).val());
            $("#pageNo").val(1);
            requestIdentities();
            requestTable();
        });

        $("#HasComments").change(function () {
            requestTable();
        });
    });
</script>